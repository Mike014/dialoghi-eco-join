<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dialoghi con un’Eco — Team Application (EN)</title>
  <style>
    /* --- Base & Reset --- */
    *,
    *::before,
    *::after {
      box-sizing: border-box
    }

    :root {
      /* fluid container width with an upper bound */
      --container-max: 820px;
      --spacing: 16px;
    }

    html,
    body {
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, sans-serif;
      background: #0b0d10;
      color: #e7eaee;
      -webkit-text-size-adjust: 100%
    }

    a {
      color: #a7c7ff;
      text-decoration: underline
    }

    /* Containers */
    .container {
      width: min(100%, var(--container-max));
      margin-inline: auto;
      padding-inline: 16px
    }

    header.container {
      margin-top: 40px;
      margin-bottom: 16px
    }

    main.container {
      margin-bottom: 80px
    }

    /* Typography */
    h1 {
      font-size: clamp(22px, 4.2vw, 28px);
      margin: 0 0 6px
    }

    h2 {
      font-size: clamp(18px, 3.4vw, 20px);
      margin: 16px 0 8px
    }

    h3 {
      font-size: clamp(15px, 3vw, 16px);
      margin: 8px 0 6px;
      color: #c7d0db
    }

    .center {
      text-align: center
    }

    .muted {
      color: #a8b2bf;
      font-size: 14px
    }

    .small {
      font-size: 13px;
      color: #97a4b3
    }

    .note {
      font-size: 13px;
      color: #b8c3d0
    }

    .score {
      font-feature-settings: "tnum" 1;
      font-variant-numeric: tabular-nums
    }

    /* Cards & blocks */
    .card {
      background: #12151a;
      border: 1px solid #232b36;
      border-radius: 16px;
      padding: 20px;
      margin: 16px 0;
      box-shadow: 0 1px 0 rgba(255, 255, 255, .05), 0 12px 32px rgba(0, 0, 0, .3)
    }

    .warn {
      background: #1a1414;
      border-color: #402020
    }

    .divider {
      height: 1px;
      background: #263140;
      margin: 20px 0
    }

    .hidden {
      display: none
    }

    /* Forms */
    label {
      display: block;
      font-weight: 600;
      margin: 8px 0 4px
    }

    input[type=text],
    input[type=email],
    input[type=url],
    textarea,
    select {
      width: 100%;
      padding: 12px;
      border-radius: 10px;
      border: 1px solid #2a3542;
      background: #0f1216;
      color: #e7eaee;
      font-size: 16px;
      /* prevents zoom on mobile */
    }

    textarea {
      min-height: 120px
    }

    input[type=checkbox],
    input[type=radio] {
      inline-size: 1rem;
      block-size: 1rem;
      accent-color: #2b5cff
    }

    /* Layout helpers */
    .grid {
      display: grid;
      gap: 12px
    }

    /* 1 col by default; 2 cols from 720px */
    .grid-cols-2 {
      grid-template-columns: 1fr
    }

    @media(min-width:720px) {
      .grid-cols-2 {
        grid-template-columns: 1fr 1fr
      }
    }

    .row {
      display: flex;
      gap: 12px;
      align-items: flex-start;
      flex-wrap: wrap
    }

    /* Buttons bar */
    .btnbar {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      align-items: center
    }

    .btnbar .spacer {
      flex: 1 1 auto
    }

    button {
      appearance: none;
      border: none;
      background: #2b5cff;
      color: #fff;
      padding: 12px 16px;
      border-radius: 12px;
      font-weight: 700;
      cursor: pointer
    }

    button.secondary {
      background: #2a3542;
      color: #e7eaee
    }

    button:disabled {
      background: #1a2a4a;
      color: #6b7b95;
      cursor: not-allowed
    }

    /* Utility */
    .req {
      color: #7fb3ff;
      font-weight: 600
    }

    /* Motion preferences */
    @media (prefers-reduced-motion: reduce) {
      * {
        animation: none !important;
        transition: none !important;
        scroll-behavior: auto !important
      }
    }

    /* Safe area on notched devices */
    body {
      padding-bottom: env(safe-area-inset-bottom)
    }
  </style>
</head>

<body>
  <header class="container center">
    <h1>Dialoghi con un’Eco — Team Application</h1>
    <p class="muted">Selective intake for 1–2 pioneers. The format itself is part of the test.</p>
  </header>

  <main class="container">
    <!-- Profiling explainer -->
    <section class="card">
      <h2>How this form works — multidimensional profiling</h2>
      <p class="small">
        This is <strong>not</strong> a pass/fail intelligence test, nor a quiz about memorized notions. It’s a
        <strong>multidimensional profiling</strong> that maps your strengths across three axes:
      </p>
      <ul class="small" style="margin:0 0 8px 18px; line-height:1.5">
        <li><strong>Vision &amp; Artistry</strong> (Creativo): narrative imagination, musical/sonic thinking,
          unconventional design.</li>
        <li><strong>Depth &amp; Ethics</strong> (Riflessivo): self‑reflection, safety/ethics awareness, psychological
          modeling.</li>
        <li><strong>Breadth &amp; Learning</strong> (Curiosità): curiosity, tooling range, willingness to learn and
          explore.</li>
      </ul>
      <p class="small">We use these three scores to <strong>classify</strong> (not exclude) candidates and match them to
        roles or study tracks.</p>
      <div class="small"
        style="background:#0f1216;border:1px solid #263140;border-radius:12px;padding:10px;white-space:pre-wrap;overflow:auto">
        Candidato A → C90 R70 Q60 → Creative Lead (Vision & Artistry)
        Candidato B → C60 R90 Q70 → Ethics / Systems
        Candidato C → C70 R60 Q90 → Technical R&amp;D
        Candidato D → C40 R40 Q40 → likely not a fit (no strong axis)
      </div>
      <p class="small" style="margin-top:8px">Different phases need different mindsets; we look for
        <strong>complementary talents</strong>, not clones.
      </p>
    </section>

    <!-- Submits straight to your Formspree endpoint -->
    <form id="eco-form" name="eco-application" method="POST" action="https://formspree.io/f/mdkwyezk" accept-charset="UTF-8">
      <input type="hidden" name="form-name" value="eco-application" />
      <input type="hidden" id="fit_score" name="fit_score" value="0" />
      <input type="hidden" id="fit_breakdown" name="fit_breakdown" value="" />
      <input type="hidden" id="completion_time" name="completion_time" value="0" />
      <!-- New category scores -->
      <input type="hidden" id="creative_score" name="creative_score" value="0" />
      <input type="hidden" id="reflective_score" name="reflective_score" value="0" />
      <input type="hidden" id="curiosity_score" name="curiosity_score" value="0" />
      <input type="hidden" id="category_breakdown" name="category_breakdown" value="" />
      <!-- Email helpers for Formspree -->
      <input type="hidden" id="_subject" name="_subject" value="Eco Application — pending score" />
      <input type="hidden" name="_replyto" value="no-reply@dialoghiconuneco" />
      <!-- Honeypot anti-bot -->
      <p class="hidden">
        <label>Leave this field empty: <input name="_hp" /></label>
      </p>

      <section class="grid grid-cols-2">
        <p>
          <label>Full name <span class="req">*</span></label>
          <input required type="text" name="full_name" autocomplete="name" />
        </p>
        <p>
          <label>Email <span class="req">*</span></label>
          <input required type="email" name="email" autocomplete="email" />
        </p>
        <p>
          <label>Portfolio / GitHub</label>
          <input type="url" name="portfolio" placeholder="https://…" />
        </p>
        <p>
          <label>LinkedIn</label>
          <input type="url" name="linkedin" placeholder="https://…" />
        </p>
      </section>

      <div class="divider"></div>

      <section>
        <h2>0) Informed consent</h2>
        <p class="note">This project explores mature themes and simulated psychological pressure. Confirm you have read
          the content warnings on the pitch.</p>
        <div class="row">
          <input id="cw_ack" name="cw_ack" type="checkbox" required />
          <label for="cw_ack">I have read and understood the content warnings. I am 18+.</label>
        </div>
        <div class="row">
          <input id="gdpr_ack" name="gdpr_ack" type="checkbox" required />
          <label for="gdpr_ack">I consent to processing the data I provide for selection and contact purposes.</label>
        </div>
      </section>

      <div class="divider"></div>

      <section>
        <h2>1) Vision alignment</h2>
        <label for="q1">1. What does “silence as mechanic” mean to you in a narrative context? <span class="req">(min
            200)</span></label>
        <textarea id="q1" name="q1" minlength="200" required
          placeholder="Talk about tension, agency, rhythm, metanarrative timing, etc."></textarea>

        <label>2. Why use an agentic AI instead of scripted dialogue? (check all that apply)</label>
        <div class="grid grid-cols-2">
          <label class="row"><input type="checkbox" name="q2[]" value="narrative_emergence"> Narrative emergence</label>
          <label class="row"><input type="checkbox" name="q2[]" value="player_adaptation"> Player adaptation</label>
          <label class="row"><input type="checkbox" name="q2[]" value="thematic_exploration"> Thematic
            exploration</label>
          <label class="row"><input type="checkbox" name="q2[]" value="other"> Other</label>
        </div>

        <div class="card" style="margin-top:12px">
          <h3>3. How relevant should a <em>traditional gameplay loop</em> be for this project?</h3>
          <p class="small">Lower is better for alignment (we prioritize non-traditional loops).</p>
          <div class="row">
            <label class="row"><input type="radio" name="q3_likert" value="1" required> 1 — Not relevant</label>
            <label class="row"><input type="radio" name="q3_likert" value="2"> 2 — Low</label>
            <label class="row"><input type="radio" name="q3_likert" value="3"> 3 — Moderate</label>
            <label class="row"><input type="radio" name="q3_likert" value="4"> 4 — High</label>
            <label class="row"><input type="radio" name="q3_likert" value="5"> 5 — Critical</label>
          </div>
        </div>
      </section>

      <div class="divider"></div>

      <section>
        <h2>2) Technical comprehension</h2>
        <label for="q4">4. If ENTITÀ must “remember” interactions, how would you design memory? (schema, limits,
          safety)</label>
        <textarea id="q4" name="q4"
          placeholder="Architecture: buffers, EMA, summaries, hard/soft memory, controls, etc." required></textarea>

        <label for="q5">5. OS integration: what can go wrong and how do you prevent it? (sandbox, fallbacks,
          safe-mode)</label>
        <textarea id="q5" name="q5" required></textarea>
      </section>

      <div class="divider"></div>

      <section class="card">
        <h2>2b) Core AI concepts (quick check)</h2>

        <h3>6. Do you know what an AI agent is?</h3>
        <div class="row">
          <label class="row"><input type="radio" name="ai_agent_known" value="yes" required> Yes</label>
          <label class="row"><input type="radio" name="ai_agent_known" value="no"> No</label>
        </div>
        <label class="small" for="ai_agent_def">If yes, define it in 1–2 sentences (optional):</label>
        <textarea id="ai_agent_def" name="ai_agent_def"
          placeholder="E.g., goal-driven system that perceives, decides, and acts via tools/policies…"></textarea>

        <h3 style="margin-top:12px">7. Do you know what the ReAct framework is?</h3>
        <div class="row">
          <label class="row"><input type="radio" name="react_known" value="yes" required> Yes</label>
          <label class="row"><input type="radio" name="react_known" value="no"> No</label>
        </div>
        <label class="small" for="react_def">If yes, summarize in 1–2 sentences (optional):</label>
        <textarea id="react_def" name="react_def"
          placeholder="E.g., Reason+Act prompting loop enabling tool use with explicit chain-of-thought and actions…"></textarea>

        <h3 style="margin-top:12px">8. Do you know what “thinking” refers to in modern LLMs?</h3>
        <div class="row">
          <label class="row"><input type="radio" name="thinking_known" value="yes" required> Yes</label>
          <label class="row"><input type="radio" name="thinking_known" value="no"> No</label>
        </div>
        <label class="small" for="thinking_def">If yes, describe briefly (optional):</label>
        <textarea id="thinking_def" name="thinking_def"
          placeholder="E.g., deliberate reasoning traces/steps used to plan before answering…"></textarea>

        <p class="small" style="margin-top:6px">Note: these answers do not affect your fit score (for now); they help us
          tailor the interview.</p>
      </section>

      <div class="divider"></div>

      <!-- NEW Section 6: Technical & Conceptual Knowledge -->
      <section class="card">
        <h2>6) Technical & Conceptual Knowledge</h2>
        <p class="small">These questions assess your understanding of AI, development tools, and creative reasoning.
          Answer honestly — this section is not graded, it helps evaluate alignment.</p>

        <h3>9. Types of Artificial Intelligence by Capability Level</h3>
        <p class="note">Briefly describe the three levels: Weak (Narrow) AI, Strong (General) AI, and Super AI.</p>
        <textarea name="ai_capability_types" id="ai_capability_types"
          placeholder="E.g., Narrow AI performs specific tasks; General AI can reason like a human; Super AI would surpass human intelligence..."></textarea>

        <h3>10. What is Jupyter?</h3>
        <p class="note">Explain what Jupyter is used for and how it helps in data science or AI research.</p>
        <textarea name="jupyter_explained" id="jupyter_explained"
          placeholder="E.g., Jupyter Notebook is an interactive environment for Python code, data visualization, and documentation..."></textarea>

        <h3>11. Machine Learning paradigms</h3>
        <p class="note">List and briefly explain the three main ML paradigms: Supervised, Unsupervised, and
          Reinforcement Learning.</p>
        <textarea name="ml_paradigms" id="ml_paradigms"
          placeholder="E.g., Supervised uses labeled data, Unsupervised finds patterns, Reinforcement learns from rewards and penalties..."></textarea>

        <h3>12. What is Natural Language Processing (NLP)?</h3>
        <p class="note">Define NLP and describe one example of its application.</p>
        <textarea name="nlp_definition" id="nlp_definition"
          placeholder="E.g., NLP is a branch of AI that allows computers to understand and generate human language, like chatbots or translation systems..."></textarea>

        <h3>13. What is an IP address?</h3>
        <p class="note">Explain in your own words what an IP address is and its purpose in networking.</p>
        <textarea name="ip_definition" id="ip_definition"
          placeholder="E.g., an IP address is a unique numeric identifier assigned to devices on a network to locate and communicate..."></textarea>

        <h3>14. Can you work from the terminal or command line?</h3>
        <p class="note">Describe your familiarity with shells (Bash, PowerShell, etc.) and explain what the
          <code>ls</code> command does.
        </p>
        <textarea name="terminal_experience" id="terminal_experience"
          placeholder="E.g., yes, I use Bash and PowerShell; 'ls' lists files and directories in the current path..."></textarea>

        <h3>15. Explain what Binaural Audio is.</h3>
        <p class="note">Describe how binaural audio works and why it is used in immersive experiences.</p>
        <textarea name="binaural_audio" id="binaural_audio"
          placeholder="E.g., Binaural audio uses two microphones or virtual spatial simulation to reproduce 3D sound perception through headphones..."></textarea>

        <h3>16. Creative reasoning — composing a dystopian theme</h3>
        <p class="note">How would you structure the musical theme of a video game set in a dystopian future, with a
          sensitive protagonist and strong moral core?</p>
        <textarea name="dystopian_theme" id="dystopian_theme"
          placeholder="Describe atmosphere, instrumentation, pacing, emotional tone, and how sound reflects narrative conflict..."></textarea>

        <h3>17. Archetypal structure — the Jungian triad</h3>
        <p class="note">
          Carl Gustav Jung’s analytical psychology describes the mind as a dynamic system composed of the
          <strong>Ego</strong> (the “I” or center of consciousness),
          the <strong>Consciousness</strong> (the field of awareness where the Ego operates), and deeper autonomous
          structures within the <strong>Unconscious</strong>,
          such as archetypes (Shadow, Anima/Animus) and the Self (totality striving for unity).
        </p>
        <p class="note">
          In this project, we sometimes reinterpret this model through the triad <strong>IO – COSCIENZA –
            ENTITÀ</strong>.
          Imagine you are designing your own narrative or interactive world: how would you structure its psychological
          architecture following Jung’s theory?
          How would you define or manifest your equivalent of IO, COSCIENZA, and ENTITÀ — or would you choose a
          different triadic model entirely?
        </p>
        <textarea name="jungian_structure" id="jungian_structure"
          placeholder="Describe how you would reinterpret Jung’s model in your narrative — e.g., Ego as the player, Consciousness as the system layer, Entity as an autonomous Self observing everything..."></textarea>
      </section>

      <div class="divider"></div>

      <section>
        <h2>3) Practical ethics</h2>
        <p>9. The experience goes deep into psychological themes. What are your ethical boundaries?</p>
        <label class="row"><input type="checkbox" name="q6[]" value="not_clinical"> Not therapy / not clinical</label>
        <label class="row"><input type="checkbox" name="q6[]" value="informed_consent"> Informed consent & clear
          opt-out</label>
        <label class="row"><input type="checkbox" name="q6[]" value="safety_testing"> Safety testing & escalation
          path</label>
        <label class="row"><input type="checkbox" name="q6[]" value="other"> Other (describe)</label>
        <label for="q6_extra" class="hidden">Other:</label>
        <textarea id="q6_extra" name="q6_extra" placeholder="Add clarifications on your ethical boundaries"></textarea>
      </section>

      <div class="divider"></div>

      <section>
        <h2>4) Role, availability & compensation</h2>
        <label>Interested roles</label>
        <div class="grid grid-cols-2">
          <label class="row"><input type="checkbox" name="role[]" value="ai_engineer"> AI / Systems Engineer</label>
          <label class="row"><input type="checkbox" name="role[]" value="unity_csharp"> Unity / C# Developer</label>
          <label class="row"><input type="checkbox" name="role[]" value="narrative_design"> Narrative / Story
            Architect</label>
          <label class="row"><input type="checkbox" name="role[]" value="game_audio"> Game Audio / Sound</label>
          <label class="row"><input type="checkbox" name="role[]" value="ops_security"> Ops / Build / Security</label>
          <label class="row"><input type="checkbox" name="role[]" value="art_direction"> Art / UX Direction</label>
        </div>
        <label for="availability">Availability (hours/week, timezone, constraints)</label>
        <input id="availability" name="availability" type="text"
          placeholder="e.g., 4–10h/week, CET, Fridays preferred" />

        <div class="card warn">
          <h3>Compensation Policy (read carefully)</h3>
          <p class="small">This is a paid collaboration directed and funded personally by Michele Grimaldi. It is
            <strong>not volunteer work</strong>. The current model is modest but clear: we may agree on <strong>one
              focused workday per week</strong> (or similar). That day is paid a small stipend (for example
            <strong>€10–€20 per agreed workday</strong>), adjusted case-by-case and subject to mutual agreement. Scope
            must stay aligned with the project’s priorities and study plan. As resources grow, rates can be revised.
            Payment method and schedule are defined directly with Michele after passing the form and a short call.
          </p>
          <label class="row"><input type="checkbox" name="comp_ack" required> I understand and accept the compensation
            policy described above.</label>
        </div>

        <label for="compensation">Optional — your expected range</label>
        <input id="compensation" name="compensation" type="text" placeholder="e.g., €X per focused workday" />
      </section>

      <div class="divider"></div>

      <section class="card">
        <h2>5) Commitment to learning</h2>
        <p class="small">To work on this project you must be willing to <strong>study continuously</strong> to keep pace
          with the technology and design research: papers (e.g., <em>arXiv</em>), docs, RFCs, OS manuals, Unity/C#
          references, AI/ML notes, ethics guidelines. Learning is part of the job.</p>
        <label class="row"><input type="checkbox" name="learn_ack" required> I am willing to study materials regularly
          (including arXiv and official docs) and keep up with the project’s learning track.</label>
      </section>

      <div class="divider"></div>

      <section class="warn card">
        <h2>IP, License & Copyright</h2>
        <p class="small">The project is <strong>proprietary</strong> and protected by <strong>Copyright</strong> and a
          <strong>License</strong> as described in the repository README. No public forks, leaks, or derivative works
          without written permission. You may be asked to sign an NDA.
        </p>
        <label class="row"><input type="checkbox" name="nda_ready" value="yes"> I am willing to sign an NDA if
          requested.</label>
      </section>

      <div class="divider"></div>

      <div class="btnbar">
        <button type="button" class="secondary" id="previewBtn">Preview score</button>
        <button type="submit" id="submitBtn">Submit application</button>
        <span class="small spacer"></span>
        <span id="scoreOut" class="small score"></span>
      </div>
    </form>

    <section class="card">
      <h2>Privacy notice (short)</h2>
      <p class="small">Controller: Michele Grimaldi. Purpose: evaluating applications and contacting candidates. Legal
        basis: consent. Retention: max 12 months. Rights: access, rectification, erasure, restriction, portability,
        objection. Requests: mikgrimaldi7@gmail.com.</p>
    </section>
  </main>

  <script>
    // Track start time
    const startTime = Date.now();

    // ---- Scoring helpers ----
    function containsConcepts(text, concepts) {
      const t = (text || "").toLowerCase();
      return concepts.reduce((acc, c) => acc + (t.includes(c) ? 1 : 0), 0);
    }

    function passFreeText(text, minLen, keywords) {
      const lenOK = (text || "").trim().length >= (minLen || 0);
      const hits = containsConcepts(text, keywords || []);
      return (lenOK && hits >= Math.max(1, Math.ceil((keywords || []).length * 0.15))); // at least 15% of keywords
    }

    function calcScore() {
      const get = id => (document.getElementById(id)?.value || "");

      // Base questions used previously
      const q1 = get('q1');
      const q4 = get('q4');
      const q5 = get('q5');
      const q6_extra = get('q6_extra');
      const q3Likert = Number((document.querySelector('input[name="q3_likert"]:checked') || {}).value || 0);

      // New section 6 fields
      const ai_capability_types = get('ai_capability_types');
      const jupyter_explained = get('jupyter_explained');
      const ml_paradigms = get('ml_paradigms');
      const nlp_definition = get('nlp_definition');
      const ip_definition = get('ip_definition');
      const terminal_experience = get('terminal_experience');
      const binaural_audio = get('binaural_audio');
      const dystopian_theme = get('dystopian_theme');
      const jungian_structure = get('jungian_structure');

      let score = 0;
      let breakdown = [];

      // ---- Original fit scoring (0..100) ----
      // Vision (Q1) — up to 25
      const conceptHits = containsConcepts(q1, ["tension", "agency", "rhythm", "tempo", "metanarrative", "silence"]);
      if (q1.trim().length >= 200) {
        const s = Math.min(25, 10 + conceptHits * 3);
        score += s; breakdown.push(`Vision Q1: +${s}`);
      }

      // Vision (Q3 Likert) — prefer low relevance for traditional loop
      const likertMap = { 1: 25, 2: 20, 3: 12, 4: 8, 5: 5 };
      const s3 = likertMap[q3Likert] || 0;
      score += s3; breakdown.push(`Vision Q3 (Likert): +${s3}`);

      // Systems thinking (Q4/Q5) — up to 30 (15+15)
      const s4 = Math.min(15, 6 + containsConcepts(q4, ["buffer", "ema", "hysteresis", "summary", "token", "privacy", "retention", "consistency", "rate", "cooldown", "safety"]));
      score += s4; breakdown.push(`Tech Q4: +${s4}`);

      const s5 = Math.min(15, 6 + containsConcepts(q5, ["sandbox", "fallback", "safe", "permission", "os", "dpi", "resolution", "threat", "abuse", "mitigation", "logging"]));
      score += s5; breakdown.push(`Tech Q5: +${s5}`);

      // Ethics (Q6 extra) — up to 20
      const s6 = Math.min(20, 8 + containsConcepts(q6_extra, ["consent", "opt-out", "support", "escalation", "trigger", "responsible", "ethics", "gdpr"]));
      score += s6; breakdown.push(`Ethics Q6: +${s6}`);

      score = Math.round(score);

      // ---- Category scoring (Creative / Reflective / Curiosity) 0..100 each ----
      // Define checks as booleans that mark a positive outcome
      const creativeChecks = [
        passFreeText(dystopian_theme, 120, ["leitmotif", "theme", "variation", "texture", "instrument", "strings", "synth", "piano", "tempo", "minor", "dissonance", "diegetic", "ambient", "arc", "rhythm", "orchestration", "motif"]),
        passFreeText(binaural_audio, 80, ["binaural", "hrtf", "interaural", "phase", "3d", "spatial", "head", "dummy", "headphones", "localization", "elevation"]),
        passFreeText(q1, 200, ["tension", "agency", "rhythm", "tempo", "metanarrative", "silence"]) // vision creativity
      ];

      const reflectiveChecks = [
        passFreeText(jungian_structure, 120, ["ego", "consciousness", "self", "shadow", "anima", "animus", "archetype", "triad", "integration", "individuation", "entity"]),
        passFreeText(q6_extra, 40, ["consent", "opt-out", "safety", "escalation", "boundaries", "ethics", "psychological", "wellbeing"]),
        passFreeText(q4, 100, ["memory", "buffer", "summary", "limits", "retention", "safety", "policy", "consistency"]) // reflective systems thinking
      ];

      const curiosityChecks = [
        passFreeText(ai_capability_types, 60, ["narrow", "general", "super", "agi", "weak", "strong"]),
        passFreeText(jupyter_explained, 40, ["notebook", "interactive", "python", "visualization", "documentation", "kernel"]),
        passFreeText(ml_paradigms, 50, ["supervised", "unsupervised", "reinforcement", "labels", "clusters", "reward"]),
        passFreeText(nlp_definition, 40, ["language", "text", "understand", "generate", "chatbot", "translation", "token"]),
        passFreeText(ip_definition, 30, ["address", "network", "identify", "route", "packet", "ipv4", "ipv6"]),
        passFreeText(terminal_experience, 20, ["bash", "powershell", "zsh", "shell", "ls", "directory", "path"])
      ];

      function pct(arr) {
        const ok = arr.filter(Boolean).length;
        return Math.round((ok / arr.length) * 100);
      }

      const creative = pct(creativeChecks);
      const reflective = pct(reflectiveChecks);
      const curiosity = pct(curiosityChecks);

      // Expose in hidden fields
      document.getElementById('creative_score').value = String(creative);
      document.getElementById('reflective_score').value = String(reflective);
      document.getElementById('curiosity_score').value = String(curiosity);
      document.getElementById('category_breakdown').value = `Creative ${creative} | Reflective ${reflective} | Curiosity ${curiosity}`;

      return { score, breakdown: breakdown.join(' | '), creative, reflective, curiosity };
    }

    function updateHidden() {
      const { score, breakdown, creative, reflective, curiosity } = calcScore();
      document.getElementById('fit_score').value = String(score);
      document.getElementById('fit_breakdown').value = breakdown;

      // Update completion time
      const completionTime = Math.round((Date.now() - startTime) / 1000);
      document.getElementById('completion_time').value = completionTime;

      return { score, breakdown, completionTime, creative, reflective, curiosity };
    }

    // ---- UI events ----
    document.getElementById('previewBtn').addEventListener('click', function () {
      const { score, breakdown, completion_time, creative, reflective, curiosity } = updateHidden();
      document.getElementById('scoreOut').textContent =
        `Estimated fit: ${score}/100 — Vision & Artistry: ${creative}% | Depth & Ethics: ${reflective}% | Breadth & Learning: ${curiosity}% — ${document.getElementById('fit_breakdown').value}`;
    });

    document.getElementById('eco-form').addEventListener('submit', function () {
      const { score, creative, reflective, curiosity } = updateHidden();
      const name = (document.querySelector('input[name="full_name"]').value || 'Candidate').trim();
      document.getElementById('_subject').value = `Eco Application — ${name} — score ${score} — C:${creative}% R:${reflective}% Q:${curiosity}%`;
      // UX nicety
      const btn = document.getElementById('submitBtn');
      btn.disabled = true; btn.textContent = 'Submitting...';
      setTimeout(() => { btn.disabled = false; btn.textContent = 'Submit application'; }, 3000);
    });

    // Toggle Q6 "Other" textarea
    const q6extra = document.getElementById('q6_extra');
    document.querySelectorAll('input[name="q6[]"]').forEach(cb => {
      cb.addEventListener('change', () => {
        const checked = document.querySelector('input[name="q6[]"][value="other"]').checked;
        q6extra.parentElement.classList.toggle('hidden', !checked);
        if (checked) q6extra.setAttribute('required', 'required');
        else q6extra.removeAttribute('required');
      });
    });
  </script>
</body>

</html>